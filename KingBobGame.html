<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>King Bob's Exploding Arcade</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(180deg, #2C1810 0%, #4A2C17 30%, #1A3A2E 70%, #0F2027 100%);
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
            touch-action: manipulation;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255,100,0,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255,200,0,0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: 1;
        }
        
        .game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            z-index: 2;
        }
        
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
            backdrop-filter: blur(5px);
        }
        
        .start-screen.hidden {
            display: none;
        }
        
        .start-screen-title {
            font-size: clamp(24px, 8vw, 48px);
            font-weight: 900;
            color: #FFD700;
            text-shadow: 4px 4px 0px #8B0000, 8px 8px 15px rgba(255,100,0,0.8);
            animation: nuclearGlow 3s ease-in-out infinite alternate;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
        }
        
        .start-screen-subtitle {
            font-size: clamp(10px, 3vw, 18px);
            font-weight: 700;
            color: #FF6B35;
            text-shadow: 2px 2px 0px #8B0000;
            text-align: center;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        
        .start-button {
            background: linear-gradient(45deg, #FF4500 0%, #FF6B35 50%, #FFD700 100%);
            border: 4px solid #8B0000;
            color: #FFFFFF;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: clamp(12px, 3vw, 20px);
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            text-shadow: 2px 2px 0px #8B0000;
            box-shadow: 
                0 8px 16px rgba(0,0,0,0.6),
                inset 0 2px 4px rgba(255,255,255,0.3),
                0 0 20px rgba(255,69,0,0.5);
            transition: all 0.3s ease;
            animation: buttonGlow 2s ease-in-out infinite alternate;
            margin-top: 20px;
            user-select: none;
            letter-spacing: 1px;
        }
        
        .start-button:hover {
            transform: scale(1.05);
            box-shadow: 
                0 12px 24px rgba(0,0,0,0.8),
                inset 0 2px 4px rgba(255,255,255,0.4),
                0 0 30px rgba(255,69,0,0.8);
        }
        
        .start-button:active {
            transform: scale(0.95);
        }
        
        @keyframes buttonGlow {
            0% { 
                box-shadow: 
                    0 8px 16px rgba(0,0,0,0.6),
                    inset 0 2px 4px rgba(255,255,255,0.3),
                    0 0 20px rgba(255,69,0,0.5);
            }
            100% { 
                box-shadow: 
                    0 8px 16px rgba(0,0,0,0.6),
                    inset 0 2px 4px rgba(255,255,255,0.3),
                    0 0 40px rgba(255,200,0,0.8);
            }
        }
        
        .header {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
            color: #FFD700;
            text-shadow: 3px 3px 0px #8B0000, 6px 6px 10px rgba(255,100,0,0.5);
        }
        
        .title {
            font-size: clamp(16px, 6vw, 36px);
            font-weight: 900;
            margin-bottom: 10px;
            animation: nuclearGlow 3s ease-in-out infinite alternate;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: clamp(8px, 2.5vw, 16px);
            font-weight: 700;
            color: #FF6B35;
            text-shadow: 2px 2px 0px #8B0000, 4px 4px 8px rgba(255,100,0,0.8);
            letter-spacing: 1px;
        }
        
        @keyframes nuclearGlow {
            0% { 
                text-shadow: 3px 3px 0px #8B0000, 6px 6px 10px rgba(255,100,0,0.5);
            }
            100% { 
                text-shadow: 3px 3px 0px #8B0000, 6px 6px 20px rgba(255,200,0,0.8), 0 0 30px rgba(255,100,0,0.6);
            }
        }
        
        .score {
            position: absolute;
            top: 120px;
            right: 30px;
            color: #FFD700;
            font-size: clamp(12px, 3vw, 20px);
            font-weight: 700;
            text-shadow: 2px 2px 0px #8B0000, 4px 4px 8px rgba(255,100,0,0.8);
            z-index: 100;
            letter-spacing: 1px;
        }
        
        .lives {
            position: absolute;
            top: 160px;
            right: 30px;
            color: #FF4500;
            font-size: clamp(12px, 3vw, 20px);
            font-weight: 700;
            text-shadow: 2px 2px 0px #8B0000, 4px 4px 8px rgba(255,100,0,0.8);
            z-index: 100;
            letter-spacing: 1px;
        }
        
        .difficulty-indicator {
            position: absolute;
            top: 200px;
            right: 30px;
            color: #00FF00;
            font-size: clamp(10px, 2.5vw, 16px);
            font-weight: 700;
            text-shadow: 2px 2px 0px #008000, 4px 4px 8px rgba(0,255,0,0.8);
            z-index: 100;
            letter-spacing: 1px;
        }
        
        .heart {
            display: inline-block;
            color: #FF0000;
            margin-left: 5px;
            animation: heartbeat 2s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 300;
            backdrop-filter: blur(10px);
        }
        
        .game-over-screen.hidden {
            display: none;
        }
        
        .game-over-title {
            font-size: clamp(24px, 8vw, 48px);
            font-weight: 900;
            color: #FF0000;
            text-shadow: 4px 4px 0px #8B0000, 8px 8px 15px rgba(255,0,0,0.8);
            animation: redGlow 2s ease-in-out infinite alternate;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: 2px;
        }
        
        .final-score {
            font-size: clamp(14px, 4vw, 24px);
            font-weight: 700;
            color: #FFD700;
            text-shadow: 2px 2px 0px #8B0000;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }
        
        @keyframes redGlow {
            0% { 
                text-shadow: 4px 4px 0px #8B0000, 8px 8px 15px rgba(255,0,0,0.8);
            }
            100% { 
                text-shadow: 4px 4px 0px #8B0000, 8px 8px 25px rgba(255,0,0,1), 0 0 40px rgba(255,0,0,0.6);
            }
        }
        
        .field {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 65%;
            background: linear-gradient(180deg, #2F4F2F 0%, #1C3A1C 50%, #0D2818 100%);
            border-top: 6px solid #8B4513;
            box-shadow: inset 0 10px 20px rgba(0,0,0,0.5);
        }
        
        .field::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 15% 85%, rgba(139,69,19,0.3) 3px, transparent 3px),
                radial-gradient(circle at 45% 75%, rgba(139,69,19,0.2) 2px, transparent 2px),
                radial-gradient(circle at 75% 90%, rgba(139,69,19,0.3) 2.5px, transparent 2.5px);
            background-size: 80px 80px, 50px 50px, 90px 90px;
        }
        
        .monster {
            position: absolute;
            cursor: pointer;
            transition: transform 0.1s ease;
            z-index: 10;
        }
        
        .monster:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }
        
        .monster:active {
            transform: scale(0.95);
        }
        
        .monster-body {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            position: relative;
            animation: emerge 1.5s ease-out, bob 3s ease-in-out infinite;
            box-shadow: 0 8px 16px rgba(0,0,0,0.6), inset 0 2px 4px rgba(255,255,255,0.2);
        }
        
        /* Spider Monster */
        .spider-monster .monster-body {
            border-radius: 40% 60% 50% 50%;
        }
        
        .spider-legs {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .spider-leg {
            position: absolute;
            width: 3px;
            height: 30px;
            background: #2F4F2F;
            border-radius: 2px;
            transform-origin: bottom center;
            animation: spiderWalk 2s ease-in-out infinite;
        }
        
        @keyframes spiderWalk {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(15deg); }
        }
        
        /* Skull Monster */
        .skull-monster .monster-body {
            border-radius: 50% 50% 40% 40%;
        }
        
        .skull-features {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .skull-socket {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #000;
            border-radius: 50%;
            box-shadow: inset 0 0 5px rgba(255,0,0,0.5);
        }
        
        .skull-socket:first-child { left: -10px; }
        .skull-socket:last-child { right: -10px; }
        
        /* Blob Monster */
        .blob-monster .monster-body {
            border-radius: 60% 40% 30% 70%;
            animation: emerge 1.5s ease-out, blobPulse 2s ease-in-out infinite;
        }
        
        @keyframes blobPulse {
            0%, 100% { 
                border-radius: 60% 40% 30% 70%;
                transform: scale(1);
            }
            50% { 
                border-radius: 40% 60% 70% 30%;
                transform: scale(1.1);
            }
        }
        
        /* Crystal Monster */
        .crystal-monster .monster-body {
            border-radius: 20%;
            transform: rotate(45deg);
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
        }
        
        .crystal-facets {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.2) 50%, transparent 60%);
            border-radius: 20%;
        }
        
        /* Tentacle Monster */
        .tentacle-monster .monster-body {
            border-radius: 50% 50% 30% 30%;
        }
        
        .tentacles {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .tentacle {
            position: absolute;
            width: 4px;
            height: 25px;
            background: linear-gradient(to bottom, #4A2C2A, #8B4513);
            border-radius: 2px;
            transform-origin: top center;
            animation: tentacleWave 3s ease-in-out infinite;
        }
        
        @keyframes tentacleWave {
            0%, 100% { transform: rotate(-15deg); }
            50% { transform: rotate(15deg); }
        }
        
        .monster-eyes {
            position: absolute;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }
        
        .eye {
            width: 12px;
            height: 12px;
            background: #FF4500;
            border-radius: 50%;
            position: relative;
            box-shadow: 0 0 8px rgba(255,69,0,0.8);
        }
        
        .eye::after {
            content: '';
            position: absolute;
            width: 6px;
            height: 6px;
            background: #8B0000;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            animation: evilBlink 3s ease-in-out infinite;
        }
        
        .monster-mouth {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 10px;
            background: #000;
            border-radius: 0 0 20px 20px;
            box-shadow: inset 0 2px 4px rgba(255,0,0,0.5);
        }
        
        @keyframes emerge {
            0% { 
                transform: translateY(120px) scale(0) rotate(-180deg); 
                opacity: 0;
            }
            100% { 
                transform: translateY(0) scale(1) rotate(0deg); 
                opacity: 1;
            }
        }
        
        @keyframes bob {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes evilBlink {
            0%, 85%, 100% { opacity: 1; }
            90% { opacity: 0; }
        }
        
        .nuclear-explosion {
            position: absolute;
            pointer-events: none;
            z-index: 50;
        }
        
        .explosion-burst {
            position: absolute;
            left: -50px;
            top: -50px;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, #FFFFFF 0%, #FFD700 20%, #FF4500 40%, #FF0000 70%, transparent 100%);
            animation: explosionBurst 0.8s ease-out forwards;
            box-shadow: 
                0 0 50px rgba(255, 255, 255, 0.8),
                0 0 100px rgba(255, 215, 0, 0.6),
                0 0 150px rgba(255, 69, 0, 0.4);
        }
        
        .explosion-ring {
            position: absolute;
            left: -25px;
            top: -25px;
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            animation: explosionRing 1s ease-out forwards;
        }
        
        .explosion-spark {
            position: absolute;
            width: 3px;
            height: 20px;
            background: linear-gradient(to bottom, #FFFFFF, #FFD700, #FF4500);
            border-radius: 2px;
            animation: explosionSpark 1.2s ease-out forwards;
        }
        
        @keyframes explosionBurst {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.9;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        @keyframes explosionRing {
            0% {
                transform: scale(0);
                opacity: 1;
                border-width: 8px;
            }
            100% {
                transform: scale(6);
                opacity: 0;
                border-width: 1px;
            }
        }
        
        @keyframes explosionSpark {
            0% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
            50% {
                transform: scale(1.5) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(0.5) rotate(360deg);
                opacity: 0;
            }
        }
        
        .explosion-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: nuclearParticle 1.5s ease-out forwards;
        }
        
        @keyframes nuclearParticle {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }
        
        .score-popup {
            position: absolute;
            color: #FFD700;
            font-size: clamp(14px, 4vw, 24px);
            font-weight: 700;
            text-shadow: 3px 3px 0px #8B0000, 6px 6px 12px rgba(255,100,0,0.8);
            pointer-events: none;
            z-index: 60;
            animation: nuclearScoreUp 1.5s ease-out forwards;
            letter-spacing: 1px;
        }
        
        @keyframes nuclearScoreUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-60px) scale(1.5);
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .monster-body {
                width: 60px;
                height: 60px;
            }
            
            .monster-eyes {
                top: 18px;
                gap: 6px;
            }
            
            .eye {
                width: 10px;
                height: 10px;
            }
            
            .eye::after {
                width: 5px;
                height: 5px;
                top: 2px;
                left: 2px;
            }
            
            .monster-mouth {
                bottom: 15px;
                width: 16px;
                height: 8px;
            }
            
            .spider-leg {
                height: 20px;
            }
            
            .tentacle {
                height: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="start-screen" id="startScreen">
            <div class="start-screen-title">KING BOB'S EXPLODING ARCADE</div>
            <div class="start-screen-subtitle">KING BOB NEEDS YOUR HELP EXPLODING THE BAD GUYS</div>
            <div class="start-screen-subtitle">CLICK THE MONSTERS TO EXPLODE THEM!</div>
            <button class="start-button" id="startButton">START GAME</button>
        </div>
        
        <div class="header">
            <div class="title">KING BOB'S EXPLODING ARCADE</div>
            <div class="subtitle">CLICK THE MONSTERS TO EXPLODE THEM!</div>
        </div>
        
        <div class="score">SCORE: <span id="scoreValue">0</span></div>
        <div class="lives">LIVES: <span id="livesContainer"></span></div>
        <div class="difficulty-indicator">DIFFICULTY: <span id="difficultyLevel">EASY</span></div>
        
        <div class="game-over-screen hidden" id="gameOverScreen">
            <div class="game-over-title">GAME OVER</div>
            <div class="final-score">FINAL SCORE: <span id="finalScore">0</span></div>
            <button class="start-button" id="restartButton">PLAY AGAIN</button>
        </div>
        
        <div class="field" id="field"></div>
    </div>

    <script>
        class Game {
            constructor() {
                this.score = 0;
                this.lives = 5;
                this.field = document.getElementById('field');
                this.scoreElement = document.getElementById('scoreValue');
                this.livesContainer = document.getElementById('livesContainer');
                this.difficultyElement = document.getElementById('difficultyLevel');
                this.startScreen = document.getElementById('startScreen');
                this.startButton = document.getElementById('startButton');
                this.gameOverScreen = document.getElementById('gameOverScreen');
                this.restartButton = document.getElementById('restartButton');
                this.finalScoreElement = document.getElementById('finalScore');
                this.monsters = [];
                this.gameActive = false;
                this.spawnInterval = null;
                this.startTime = 0;
                this.difficultyLevel = 0;
                
                this.monsterColors = [
                    '#8B0000', '#654321', '#2F4F2F', '#483D8B', 
                    '#8B4513', '#556B2F', '#800080', '#B22222'
                ];
                
                this.monsterTypes = [
                    'basic',
                    'spider',
                    'skull', 
                    'blob',
                    'crystal',
                    'tentacle'
                ];
                
                this.setupStartButton();
                this.setupRestartButton();
                this.updateLivesDisplay();
            }
            
            setupStartButton() {
                this.startButton.addEventListener('click', () => this.startGame());
                this.startButton.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.startGame();
                }, { passive: false });
            }
            
            setupRestartButton() {
                this.restartButton.addEventListener('click', () => this.restartGame());
                this.restartButton.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.restartGame();
                }, { passive: false });
            }
            
            updateLivesDisplay() {
                this.livesContainer.innerHTML = '';
                for (let i = 0; i < this.lives; i++) {
                    const heart = document.createElement('span');
                    heart.className = 'heart';
                    heart.innerHTML = '♥';
                    this.livesContainer.appendChild(heart);
                }
            }
            
            updateDifficulty() {
                const gameTime = (Date.now() - this.startTime) / 1000;
                const oldLevel = this.difficultyLevel;
                
                if (gameTime < 10) {
                    this.difficultyLevel = 0;
                    this.difficultyElement.textContent = 'EASY';
                    this.difficultyElement.style.color = '#00FF00';
                } else if (gameTime < 30) {
                    this.difficultyLevel = 1;
                    this.difficultyElement.textContent = 'MEDIUM';
                    this.difficultyElement.style.color = '#FFFF00';
                } else if (gameTime < 60) {
                    this.difficultyLevel = 2;
                    this.difficultyElement.textContent = 'HARD';
                    this.difficultyElement.style.color = '#FF6B35';
                } else if (gameTime < 120) {
                    this.difficultyLevel = 3;
                    this.difficultyElement.textContent = 'EXTREME';
                    this.difficultyElement.style.color = '#FF4500';
                } else {
                    this.difficultyLevel = 4;
                    this.difficultyElement.textContent = 'INSANE';
                    this.difficultyElement.style.color = '#FF0000';
                }
                
                // Reset spawn interval if difficulty changed
                if (oldLevel !== this.difficultyLevel && this.gameActive) {
                    clearInterval(this.spawnInterval);
                    this.setupSpawnInterval();
                }
            }
            
            getMonsterLifetime() {
                // Monster lifetime decreases with difficulty
                const baseTimes = [3500, 3000, 2500, 2000, 1500]; // milliseconds
                return baseTimes[this.difficultyLevel] || 1000;
            }
            
            getSpawnRate() {
                // Spawn rate increases with difficulty
                const baseRates = [2500, 2000, 1500, 1000, 700]; // milliseconds
                return baseRates[this.difficultyLevel] || 500;
            }
            
            setupSpawnInterval() {
                const spawnRate = this.getSpawnRate();
                this.spawnInterval = setInterval(() => {
                    if (this.gameActive) {
                        this.spawnMonster();
                        this.updateDifficulty();
                    }
                }, spawnRate);
            }
            
            loseLife() {
                this.lives--;
                this.updateLivesDisplay();
                
                if (this.lives <= 0) {
                    this.gameOver();
                }
            }
            
            gameOver() {
                this.gameActive = false;
                if (this.spawnInterval) {
                    clearInterval(this.spawnInterval);
                }
                
                // Clear all monsters
                this.monsters.forEach(monster => {
                    if (monster.parentNode) {
                        monster.remove();
                    }
                });
                this.monsters = [];
                
                // Show game over screen
                this.finalScoreElement.textContent = this.score;
                this.gameOverScreen.classList.remove('hidden');
            }
            
            restartGame() {
                // Reset game state
                this.score = 0;
                this.lives = 5;
                this.difficultyLevel = 0;
                this.scoreElement.textContent = this.score;
                this.updateLivesDisplay();
                this.difficultyElement.textContent = 'EASY';
                this.difficultyElement.style.color = '#00FF00';
                
                // Hide game over screen and start new game
                this.gameOverScreen.classList.add('hidden');
                this.startGame();
            }
            
            startGame() {
                if (this.gameActive) return;
                
                this.gameActive = true;
                this.startTime = Date.now();
                this.startScreen.classList.add('hidden');
                
                // Start spawning monsters immediately
                this.spawnMonster();
                
                // Set up difficulty-based spawning
                this.setupSpawnInterval();
            }
            
            createMonsterHTML(type, color) {
                const commonEyes = `
                    <div class="monster-eyes">
                        <div class="eye"></div>
                        <div class="eye"></div>
                    </div>
                `;
                
                const commonMouth = `<div class="monster-mouth"></div>`;
                
                switch(type) {
                    case 'spider':
                        return `
                            <div class="monster-body" style="background: linear-gradient(135deg, ${color} 0%, ${this.lightenColor(color, 20)} 50%, ${color} 100%); border: 2px solid ${this.darkenColor(color, 30)};">
                                ${commonEyes}
                                ${commonMouth}
                                <div class="spider-legs">
                                    <div class="spider-leg" style="left: -25px; top: -10px; transform: rotate(-45deg);"></div>
                                    <div class="spider-leg" style="left: -20px; top: 5px; transform: rotate(-20deg);"></div>
                                    <div class="spider-leg" style="left: -20px; top: 20px; transform: rotate(20deg);"></div>
                                    <div class="spider-leg" style="right: -25px; top: -10px; transform: rotate(45deg);"></div>
                                    <div class="spider-leg" style="right: -20px; top: 5px; transform: rotate(20deg);"></div>
                                    <div class="spider-leg" style="right: -20px; top: 20px; transform: rotate(-20deg);"></div>
                                </div>
                            </div>
                        `;
                    
                    case 'skull':
                        return `
                            <div class="monster-body" style="background: linear-gradient(135deg, ${color} 0%, ${this.lightenColor(color, 20)} 50%, ${color} 100%); border: 2px solid ${this.darkenColor(color, 30)};">
                                <div class="skull-features">
                                    <div class="skull-socket"></div>
                                    <div class="skull-socket"></div>
                                </div>
                                ${commonMouth}
                            </div>
                        `;
                    
                    case 'blob':
                        return `
                            <div class="monster-body" style="background: linear-gradient(135deg, ${color} 0%, ${this.lightenColor(color, 20)} 50%, ${color} 100%); border: 2px solid ${this.darkenColor(color, 30)};">
                                ${commonEyes}
                                ${commonMouth}
                            </div>
                        `;
                    
                    case 'crystal':
                        return `
                            <div class="monster-body" style="background: linear-gradient(135deg, ${color} 0%, ${this.lightenColor(color, 40)} 50%, ${color} 100%); border: 2px solid ${this.darkenColor(color, 30)};">
                                <div class="crystal-facets"></div>
                                ${commonEyes}
                                ${commonMouth}
                            </div>
                        `;
                    
                    case 'tentacle':
                        return `
                            <div class="monster-body" style="background: linear-gradient(135deg, ${color} 0%, ${this.lightenColor(color, 20)} 50%, ${color} 100%); border: 2px solid ${this.darkenColor(color, 30)};">
                                ${commonEyes}
                                ${commonMouth}
                                <div class="tentacles">
                                    <div class="tentacle" style="left: -8px; animation-delay: 0s;"></div>
                                    <div class="tentacle" style="left: -2px; animation-delay: 0.5s;"></div>
                                    <div class="tentacle" style="left: 4px; animation-delay: 1s;"></div>
                                    <div class="tentacle" style="left: 10px; animation-delay: 1.5s;"></div>
                                </div>
                            </div>
                        `;
                    
                    default: // basic
                        return `
                            <div class="monster-body" style="background: linear-gradient(135deg, ${color} 0%, ${this.lightenColor(color, 20)} 50%, ${color} 100%); border: 2px solid ${this.darkenColor(color, 30)};">
                                ${commonEyes}
                                ${commonMouth}
                            </div>
                        `;
                }
            }
            
            spawnMonster() {
                if (!this.gameActive) return;
                
                const monster = document.createElement('div');
                monster.className = 'monster';
                monster.spawnTime = Date.now();
                
                const gameRect = this.field.parentElement.getBoundingClientRect();
                const monsterSize = window.innerWidth <= 768 ? 60 : 80;
                
                // Spawn anywhere on screen except the header area
                const minY = 250; // Below the header and UI
                const maxY = gameRect.height - monsterSize - 50;
                const x = Math.random() * (gameRect.width - monsterSize);
                const y = minY + Math.random() * (maxY - minY);
                
                monster.style.left = x + 'px';
                monster.style.top = y + 'px';
                
                const color = this.monsterColors[Math.floor(Math.random() * this.monsterColors.length)];
                const type = this.monsterTypes[Math.floor(Math.random() * this.monsterTypes.length)];
                
                // Add type class for specific styling
                monster.classList.add(type + '-monster');
                
                monster.innerHTML = this.createMonsterHTML(type, color);
                
                // Add click/touch handlers
                monster.addEventListener('click', (e) => this.explodeMonster(e, monster));
                monster.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    this.explodeMonster(e, monster);
                }, { passive: false });
                
                this.field.parentElement.appendChild(monster);
                this.monsters.push(monster);
                
                // Remove monster after difficulty-based time and lose a life
                const lifetime = this.getMonsterLifetime();
                monster.timeout = setTimeout(() => {
                    if (monster.parentNode && this.gameActive) {
                        monster.remove();
                        this.monsters = this.monsters.filter(m => m !== monster);
                        this.loseLife();
                    }
                }, lifetime);
            }
            
            lightenColor(color, percent) {
                const num = parseInt(color.replace("#",""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                return "#" + (0x1000000 + (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 + (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 + (B < 255 ? (B < 1 ? 0 : B) : 255)).toString(16).slice(1);
            }
            
            darkenColor(color, percent) {
                const num = parseInt(color.replace("#",""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) - amt;
                const G = (num >> 8 & 0x00FF) - amt;
                const B = (num & 0x0000FF) - amt;
                return "#" + (0x1000000 + (R > 255 ? 255 : (R < 0 ? 0 : R)) * 0x10000 + (G > 255 ? 255 : (G < 0 ? 0 : G)) * 0x100 + (B > 255 ? 255 : (B < 0 ? 0 : B))).toString(16).slice(1);
            }
            
            explodeMonster(event, monster) {
                event.stopPropagation();
                
                if (!monster.parentNode || !this.gameActive) return;
                
                const rect = monster.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                // Calculate reaction time bonus
                const reactionTime = Date.now() - monster.spawnTime;
                const points = reactionTime <= 500 ? 200 : 100;
                const bonusText = points === 200 ? 'QUICK SHOT!' : '+' + points;
                
                // Clear the timeout to prevent life loss
                if (monster.timeout) {
                    clearTimeout(monster.timeout);
                }
                
                // Create explosion
                this.createNuclearExplosion(centerX, centerY);
                
                // Update score
                this.score += points;
                this.scoreElement.textContent = this.score;
                
                // Show score popup with bonus indicator
                this.showScorePopup(centerX, centerY, bonusText, points === 200);
                
                // Remove monster
                monster.remove();
                this.monsters = this.monsters.filter(m => m !== monster);
                
                // Screen shake effect
                this.nuclearShake();
            }
            
            createNuclearExplosion(x, y) {
                const explosion = document.createElement('div');
                explosion.className = 'nuclear-explosion';
                explosion.style.left = x + 'px';
                explosion.style.top = y + 'px';
                
                // Create main explosion burst
                const burst = document.createElement('div');
                burst.className = 'explosion-burst';
                explosion.appendChild(burst);
                
                // Create expanding ring
                const ring = document.createElement('div');
                ring.className = 'explosion-ring';
                explosion.appendChild(ring);
                
                // Create sparks shooting out
                const sparkCount = 12;
                for (let i = 0; i < sparkCount; i++) {
                    const spark = document.createElement('div');
                    spark.className = 'explosion-spark';
                    
                    const angle = (i / sparkCount) * Math.PI * 2;
                    const distance = 60 + Math.random() * 40;
                    const endX = Math.cos(angle) * distance;
                    const endY = Math.sin(angle) * distance;
                    
                    spark.style.left = '0px';
                    spark.style.top = '0px';
                    spark.style.transform = `translate(${endX}px, ${endY}px) rotate(${angle + Math.PI/2}rad)`;
                    spark.style.animationDelay = Math.random() * 0.2 + 's';
                    
                    explosion.appendChild(spark);
                }
                
                // Create colorful particles
                const colors = ['#FFFFFF', '#FFD700', '#FF6B35', '#FF4500', '#FF0000'];
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'explosion-particle';
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.boxShadow = `0 0 15px ${colors[Math.floor(Math.random() * colors.length)]}`;
                    
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 120 + 60;
                    const endX = Math.cos(angle) * distance;
                    const endY = Math.sin(angle) * distance;
                    
                    particle.style.left = '0px';
                    particle.style.top = '0px';
                    particle.style.transform = `translate(${endX}px, ${endY}px) scale(0)`;
                    particle.style.animationDelay = Math.random() * 0.3 + 's';
                    
                    explosion.appendChild(particle);
                }
                
                document.body.appendChild(explosion);
                
                // Screen flash - brighter and shorter
                document.body.style.background = '#FFFFFF';
                setTimeout(() => {
                    document.body.style.background = 'linear-gradient(180deg, #2C1810 0%, #4A2C17 30%, #1A3A2E 70%, #0F2027 100%)';
                }, 60);
                
                // Remove explosion after animation
                setTimeout(() => {
                    explosion.remove();
                }, 1500);
            }
            
            showScorePopup(x, y, text, isBonus = false) {
                const popup = document.createElement('div');
                popup.className = 'score-popup';
                popup.textContent = text;
                popup.style.left = (x - 25) + 'px';
                popup.style.top = (y - 15) + 'px';
                
                if (isBonus) {
                    popup.style.color = '#00FF00';
                    popup.style.textShadow = '3px 3px 0px #008000, 6px 6px 12px rgba(0,255,0,0.8)';
                    popup.style.fontSize = 'clamp(16px, 5vw, 28px)';
                }
                
                document.body.appendChild(popup);
                
                setTimeout(() => {
                    popup.remove();
                }, 1500);
            }
            
            nuclearShake() {
                const shakeFrames = [
                    'translateX(-6px) translateY(-3px)',
                    'translateX(6px) translateY(3px)',
                    'translateX(-4px) translateY(-2px)',
                    'translateX(4px) translateY(2px)',
                    'translateX(-2px)',
                    'translateX(2px)',
                    'translateX(0)'
                ];
                
                let frame = 0;
                const shakeInterval = setInterval(() => {
                    if (frame < shakeFrames.length) {
                        document.body.style.transform = shakeFrames[frame];
                        frame++;
                    } else {
                        clearInterval(shakeInterval);
                        document.body.style.transform = 'translateX(0)';
                    }
                }, 60);
            }
        }
        
        // Initialize game when page loads
        window.addEventListener('load', () => {
            new Game();
        });
        
        // Prevent context menu and double-tap zoom
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });
        
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                e.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
